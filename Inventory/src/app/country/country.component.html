<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="container mt-4">
    <div class="row justify-content-between align-items-center">
        <div class="col-6" style="white-space: nowrap;">
            <h2 class="text-primary" style="font-weight:bolder;">Countries</h2>
        </div>
        <div class="col-3 text-end" style="white-space: nowrap;">        
             <a class="btn btn-outline-primary" 
                (click)="openCreateCountryModal()">
                <i class="bi bi-plus-square-fill"></i> 
                Create</a>          
        </div>      
    </div>
  </div>
  <div class="container mt-4">
    <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" matSort class="table table-striped" [@.disabled]="true">
            <ng-container matColumnDef="country">
              <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color: 	#2c9ad9; color: white; font-size:25px;">
                Country Name
              </th>
              <td mat-cell *matCellDef="let element" style="font-size:16px;">{{ element.country }}</td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <div class="text-end">
              <th mat-header-cell *matHeaderCellDef style="background-color: 	#2c9ad9; color: white; font-size:25px;padding-left:800px;">Action</th>
              </div>
              <td mat-cell *matCellDef="let element" style="padding-left: 800px;">
                <div *ngIf="element.statusFlag===false">
                <button class="btn btn-success me-2" (click)="openUpdateCountryModal(element)">
                   <i class="fa fa-edit" style="font-size:20px"></i>
                </button>          
                <button class="btn btn-danger delete-button" data-toggle="modal" data-target="#confirmationModal" (click)="openDeleteConfirmation(element.countryId)">
                 <i class="bi bi-trash-fill"></i>
                </button>
                </div>  
                <div *ngIf="element.statusFlag===true">
                <button class="btn btn-primary activate-button" data-toggle="modal" data-target="#activationModal" (click)="openActivateConfirmation(element.countryId)">
                  Activate <i class="bi bi-check"></i>
                </button>
                </div>
              </td>
            </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
            <mat-paginator  [pageSize]="pageSize" [pageIndex]="pageIndex" (page)="handlePageChange($event)" showFirstLastButtons></mat-paginator>
    </div>
          <p class="mt-3" *ngIf="!country || country.length <= 0">No country found</p>
              </div>
              <div id="confirmationModal" class="modal fade" data-bs-backdrop="static" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title">Confirm Deletion</h4>      
                    </div>
                    <div class="modal-body">
                      <p>Do you really want to delete this country?</p>
                    </div>
                    <div class="modal-footer">        
                      <button type="button" class="btn btn-danger" (click)="deleteConfirmedCountry()">Yes</button>
                      <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onCancel()">No</button>
                    </div>
                  </div>
                </div>
              </div>
              <div id="activationModal" class="modal fade" data-bs-backdrop="static" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title">Confirm Activation</h4>        
                    </div>
                    <div class="modal-body">
                      <p>Do you really want to activate this country?</p>
                    </div>
                    <div class="modal-footer">        
                      <button type="button" class="btn btn-success" (click)="activateConfirmedCountry()">Yes</button>
                      <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="onCancel()">No</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal fade" id="updateModal"  data-bs-backdrop="static" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="updateModalLabel">Update Country</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <form (ngSubmit)="updateCountry()">
                        <div class="form-group">
                          <label for="updateCountry">Country Name</label>
                          <input  
                              type="text"  
                              class="form-control"  
                              id="updatedCountry"  
                              name="countryName"  
                              [(ngModel)]="updatedCountry"  
                              required>          
                        </div>
                       
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-primary" (click)="updateCountry()">Save changes</button>
                      <button type="button" class="btn btn-danger" (click)="closeUpdateModal()">Close</button>             
              
                    </div>
                  </div>
                </div>
               
               
              </div>
              <div class="modal fade" id="createCountryModal" tabindex="-1" data-bs-backdrop="static" aria-labelledby="createCountryModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title" id="createCountryModalLabel">Add Country</h4>
                      <button type="button" class="btn-close" aria-label="Close" (click)="closeCreateCountryModal()"></button>
                    </div>
                    <div class="modal-body">
                      <form #countryForm="ngForm" (ngSubmit)="createCountry()" novalidate>
                        <div class="row">
                          <div class="col-md-5" style="margin-right: -50px;">
                            <label for="countryName">Country Name</label>
                          </div>
                          <div class="col-md-6">
                            <input
                              type="text"
                              [(ngModel)]="addCountryName.country"
                              name="countryName"
                              class="form-control"
                              required
                              #countryName="ngModel"
                            />
                            <br>
                            <div class="row">
                              <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <button class="btn btn-success" style="margin-right: 2%;" [disabled]="!countryName.valid">Save</button>
                                <button class="btn btn-primary me-md-2" (click)="closeCreateCountryModal()">Cancel</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                    <div id="toast-container" class="toast-top-right"></div>
                  </div>
                </div>
              </div>
              
              </body>
            